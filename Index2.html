<!doctype html>
<html lang="en">
  <head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS v5.2.1 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">


</head>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>  
<script src="https://code.angularjs.org/1.8.2/angular-route.min.js"></script>  
  <body ng-app="myapp" ng-controller="myctrl">
    <div style="padding: 0;" class="container-fluid">
      <header style="z-index: 100; position:fixed; width: 100%; top: 0; left: 0;"ng-include="'include/header.html'">
        <!-- menu -->
     
       
      </header>
      
      <!-- body -->
      <main class="container-fluid mt-5 mb-3 px-4 border-bottom" style="min-height: 800px;">
        <article class="col-12" style="margin-top:80px ;" ng-view=""></article>
    </main>
    
     <footer style="margin: 0; padding: 0;" class="bg-secondary-subtle">
      <div class="container">
        <div class="row justify-content-between pt-4 pb-3 pb-lg-5">
          <div class="col-12 col-lg-7">
            <p class="mb-3">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer imperdiet non turpis eget viverra. Vivamus mattis nisi augue, in ultrices.</p>
            <div class="mb-3">
              <a class="me-2" href=""><svg class="bi bi-pinterest text-primary" fill="currentColor" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg">
              <path d="M8 0a8 8 0 0 0-2.915 15.452c-.07-.633-.134-1.606.027-2.297.146-.625.938-3.977.938-3.977s-.239-.479-.239-1.187c0-1.113.645-1.943 1.448-1.943.682 0 1.012.512 1.012 1.127 0 .686-.437 1.712-.663 2.663-.188.796.4 1.446 1.185 1.446 1.422 0 2.515-1.5 2.515-3.664 0-1.915-1.377-3.254-3.342-3.254-2.276 0-3.612 1.707-3.612 3.471 0 .688.265 1.425.595 1.826a.24.24 0 0 1 .056.23c-.061.252-.196.796-.222.907-.035.146-.116.177-.268.107-1-.465-1.624-1.926-1.624-3.1 0-2.523 1.834-4.84 5.286-4.84 2.775 0 4.932 1.977 4.932 4.62 0 2.757-1.739 4.976-4.151 4.976-.811 0-1.573-.421-1.834-.919l-.498 1.902c-.181.695-.669 1.566-.995 2.097A8 8 0 1 0 8 0z"></path></svg></a> <a class="me-2" href=""><svg class="bi bi-twitter text-primary" fill="currentColor" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg">
              <path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"></path></svg></a> <a class="me-2" href=""><svg class="bi bi-facebook text-primary" fill="currentColor" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg">
              <path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"></path></svg></a>
            </div>
          </div>
          <div class="col-12 col-lg-2 small text-lg-end mb-4 md-lg-0 pt-1">
            <p class="mb-1"><a class="text-dark text-decoration-none" href="">Home</a></p>
            <p class="mb-1"><a class="text-dark text-decoration-none" href="">Blog</a></p>
            <p class="mb-1"><a class="text-dark text-decoration-none" href="">About</a></p>
            <p class="mb-0"><a class="text-dark text-decoration-none" href="">Contacts</a></p>
          </div>
          <div class="col-12 col-lg-3 pt-1 small text-lg-end">
            <p class="mb-1">Mountain View</p>
            <p class="mb-1">California, United States</p>
            <p class="mb-1">Tel: +1 123-456-7890</p>
            <p class="mb-0"><a class="text-dark text-decoration-none" href="">hello@yourdomain.com</a></p>
          </div>
        </div>
        <div class="border-top d-lg-none"></div>
        <div class="d-lg-flex justify-content-between py-3">
          <div class="small">
            <span class="d-block d-lg-inline text-muted mb-2 mb-lg-0 me-lg-5">© 2023 FreeFrontend.dev. All rights reserved.</span> <a class="d-block d-lg-inline text-muted mb-2 mb-lg-0 me-lg-5" href="">Privacy Policy</a> <a class="d-block d-lg-inline text-muted mb-2 mb-lg-0 me-lg-5" href="">Terms of Service</a>
          </div>
          <div class="small">
            <span class="text-muted"><a class="text-muted" href="">Proudly built with Bootstrap</a></span>
          </div>
        </div>
      </div>
    </footer>
      <!-- Bootstrap JavaScript Libraries --> 
    </div>
   <script>
  var app = angular.module("myapp", ['ngRoute']);
  app.config(function ($routeProvider) {
    $routeProvider
        .when("/", {
            templateUrl: "home.html",
            controller: "myctrl"
        })
        .when("/dangki", {
            templateUrl: "Dangki.html",
            controller: "myctrl"
        })
        .when("/Dangnhap", {
            templateUrl: "frdk2.html",
            controller: "myctrl"
        })
        .when("/doipass", {
            templateUrl: "Doimk.html",
            controller: "myctrl"
        })
        .when("/quenpass", {
            templateUrl: "Quenmk.html",
            controller: "myctrl"
        })
        .when("/capnhat", {
            templateUrl: "CapNhatThongTin.html",
            controller: "myctrl"
        })
        .when("/gioithieu", {
            templateUrl: "GioiThieu.html",
            controller: "myctrl"
        })
        .when("/lienhe", {
            templateUrl: "LienHe.html",
            controller: "myctrl"
        })
        .when("/tracnghiem/:idMH/:tenMH", {
            templateUrl: "trangthi.html",
            controller: "quizctrl"
        })
        .otherwise({
            redirectTo: "/", controller:"myctrl"
        });
});
app.controller("myctrl", function($scope, $rootScope, $http, $location) {
    // Khởi tạo danh sách Students và lấy từ localStorage
    $scope.Students = JSON.parse(localStorage.getItem('students')) || [];

    // Lấy dữ liệu môn học từ file Subjects.js
    $http.get("db/Subjects.js").then(
        function(res) {
            $scope.Subjects = res.data;
        },
        function(res) {
            alert("Lỗi khi request môn học");
        }
    );

    // Hàm đăng ký tài khoản
    $scope.dangky = function() {
        $scope.Students.push($scope.Student);
        localStorage.setItem('students', JSON.stringify($scope.Students));
        alert("Đã đăng thành công tài khoản " + $scope.Student.username);
        $location.path('/');
    };

    // Khởi tạo biến username trong $rootScope bằng dữ liệu từ sessionStorage
    $rootScope.username = sessionStorage.getItem('username');

    // Hàm đăng nhập
    $scope.dangnhap = function() {
        var u = $scope.u;
        var p = $scope.p;
        var index = $scope.Students.findIndex(st => st.username === u && st.password === p);
        
        if (index >= 0) {
            $rootScope.username = u;
            sessionStorage.setItem('username', u);
            $location.path('/');
        } else {
            console.log("Đăng nhập không thành công");
            alert("Vui lòng nhập đúng tên tài khoản và mật khẩu")
        }
    };

    // Hàm đăng xuất
    $scope.thoat = function() {
        $rootScope.username = "";
        sessionStorage.removeItem("username");
        $location.path('/');
    };

    // Hàm quên mật khẩu
    $scope.quenpass = function() {
        const user = $scope.Students.find(function(s) {
            return s.email === $scope.email;
        });
        if (user) {
            alert("Mật khẩu bạn là: " + user.password);
        } else {
            alert("Không có ai có email là: " + $scope.email);
        }
    };

    // Hàm đổi mật khẩu
    $scope.doipass = function() {
        var user = $scope.Students.find(s=>s.username==$rootScope.username);
        if(user==null) {
            alert("Không có username trong db");
            return;
        }

        if (user.password != $scope.pass_old) {
            alert("Mật khẩu cũ không chính xác");
            return;
        }

        if ($scope.pass_new1 != $scope.pass_new2) {
            alert("Mật khẩu mới không giống nhau");
            return;
        }

        user.password = $scope.pass_new1;
        localStorage.setItem('students', JSON.stringify($scope.Students));
        alert("Đổi mật khẩu thành công");
        $location.path('/');
    };

    // Gửi yêu cầu GET
    $scope.pageSize=4;
    $scope.start=0;
    $http.get("db/nb.js").then(
        function(res) {
            $scope.nb= res.data;
        },
        function(res) {
            console.log(res);
        }
    );
});

      app.controller("quizctrl", function($scope, $routeParams, $http,$interval) {
    $scope.idMH = $routeParams.idMH;
    $scope.tenMH = $routeParams.tenMH;
    $scope.caccauhoi = [];
  

    $http.get("db/Quizs/" + $scope.idMH + ".js").then(
        function(res) {
            $scope.caccauhoi = res.data;
            console.log(res.data);
        },
        function(res) {
            console.log(res);
        }
    );
    
    $scope.start = 0;
$scope.pageSize = 1; // Số lượng phần tử mỗi trang
$scope.next = function() {
    if ($scope.start < $scope.caccauhoi.length) {
        $scope.start += $scope.pageSize;
    }
}
$scope.prev = function() {
    if ($scope.start > 0) {
        $scope.start -= $scope.pageSize;
    }
}
$scope.first = function() {
    $scope.start = 0;
}
$scope.last = function() {
    var soTrang = Math.ceil($scope.caccauhoi.length / $scope.pageSize);
    $scope.start = (soTrang - 1) * $scope.pageSize;
}
$scope.diem = 0;
$scope.sogiay = 0;
$interval(function() { $scope.sogiay++; }, 1000);
$scope.diem = 0;
$scope.kiemtraPA = function(idPA, idPADung, diem) {
    if (idPA === idPADung) $scope.diem += diem;
};


})

  


   </script>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script> 

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
